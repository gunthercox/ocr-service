{% extends "alabaster/layout.html" %}

{% block extrahead %}
  {{ super() }}
  <link rel="stylesheet" href="{{ pathto('_static/silktide-consent-manager.css', 1) }}">
  <script src="{{ pathto('_static/silktide-consent-manager.js', 1) }}"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3019790405701706" crossorigin="anonymous"></script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-733BJS6NWQ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    // Set consent defaults
    gtag('consent', 'default', {
        analytics_storage: localStorage.getItem('silktideCookieChoice_analytics') === 'true' ? 'granted' : 'denied',
        ad_storage: localStorage.getItem('silktideCookieChoice_advertising') === 'true' ? 'granted' : 'denied',
        ad_user_data: localStorage.getItem('silktideCookieChoice_advertising') === 'true' ? 'granted' : 'denied',
        ad_personalization: localStorage.getItem('silktideCookieChoice_advertising') === 'true' ? 'granted' : 'denied',
    });
    gtag('js', new Date());
    gtag('config', 'G-733BJS6NWQ');
  </script>
{% endblock %}

{% block sidebarextra %}
  {{ super() }}
  <div style="background-color: #f0f0f0; color: #888; text-align: center; margin: 1em 0; padding: 0.5em; border-radius: 4px; font-size: 1.1em;">
    <!-- ocr-service documentation ad -->
    <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-3019790405701706"
        data-ad-slot="2809882460"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>
{% endblock %}

{%- block footer %}
    <div class="footer">
      {% if show_copyright %}&#169;{{ copyright }}.{% endif %}
      <a href="https://gunthercox.com/privacy/" target="_blank">Privacy Policy</a>
      {% if show_sphinx %}
      {% if show_copyright %}|{% endif %}
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx {{ sphinx_version }}</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster {{ alabaster_version }}</a>
      {% endif %}
      {%- if show_source and has_source and sourcename %}
      {% if show_copyright or show_sphinx %}|{% endif %}
      <a href="{{ pathto('_sources/' + sourcename, resource=True)|e }}"
          rel="nofollow">{{ _('Page source') }}</a>
      {%- endif %}
    </div>

    <script>
    silktideCookieBannerManager.updateCookieBannerConfig({
      background: {
        showBackground: true
      },
      cookieIcon: {
        position: "bottomRight"
      },
      cookieTypes: [
        {
          id: "analytics",
          name: "Analytics",
          description: "<p>These cookies are necessary for the website to function properly and cannot be switched off. They help with things like logging in and setting your privacy preferences.</p>",
          defaultValue: true,
          required: false,
          onAccept: function() {
            gtag('consent', 'update', {
              analytics_storage: 'granted',
            });
            dataLayer.push({
              'event': 'consent_accepted_analytics',
            });
          },
          onReject: function() {
            gtag('consent', 'update', {
              analytics_storage: 'denied',
            });
          }
        },
        {
          id: "advertising",
          name: "Advertising",
          description: "<p>These cookies help us improve the site by tracking which pages are most popular and how visitors move around the site.</p>",
          defaultValue: true,
          required: false,
          onAccept: function() {
            gtag('consent', 'update', {
              ad_storage: 'granted',
              ad_user_data: 'granted',
              ad_personalization: 'granted',
            });
            dataLayer.push({
              'event': 'consent_accepted_advertising',
            });
          },
          onReject: function() {
            gtag('consent', 'update', {
              ad_storage: 'denied',
              ad_user_data: 'denied',
              ad_personalization: 'denied',
            });
          }
        }
      ],
      text: {
        banner: {
          description: "<p>We use cookies on our site to enhance your user experience, provide personalized content, and analyze our traffic. <a href=\"https://chatterbot.us/privacy/\" target=\"_blank\">Cookie Policy.</a></p>",
          acceptAllButtonText: "Accept all",
          acceptAllButtonAccessibleLabel: "Accept all cookies",
          rejectNonEssentialButtonText: "Reject non-essential",
          rejectNonEssentialButtonAccessibleLabel: "Reject non-essential",
          preferencesButtonText: "Preferences",
          preferencesButtonAccessibleLabel: "Toggle preferences"
        },
        preferences: {
          title: "Customize your cookie preferences",
          description: "<p>We respect your right to privacy. You can choose not to allow some types of cookies. Your cookie preferences will apply across our website.</p>",
          creditLinkText: "Get this banner for free",
          creditLinkAccessibleLabel: "Get this banner for free"
        }
      }
    });
    </script>

    {% if theme_github_banner|lower != 'false' %}
    <a href="https://github.com/{{ theme_github_user }}/{{ theme_github_repo }}" class="github">
        {%- if theme_github_banner|lower == 'true' %}
        <img src="{{ pathto('_static/github-banner.svg', resource=True) }}" alt="Fork me on GitHub" class="github"/>
        {%- else %}
        <img src="{{ pathto('_static/' ~ theme_github_banner, resource=True) }}" alt="Fork me on GitHub" class="github"/>
        {%- endif %}
    </a>
    {% endif %}
{%- endblock %}
